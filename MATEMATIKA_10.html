<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>MATEMATIKA 10 - Ujian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body, html { margin:0; padding:0; height:100%; }
    iframe { width:100%; height:100%; border:none; }
    .modal {
      display:none; position:fixed; z-index:999;
      left:0; top:0; width:100%; height:100%;
      background:rgba(0,0,0,0.7); color:white;
      font-size:20px; text-align:center;
      padding-top:20%;
    }
  </style>
</head>
<body>
  <iframe id="formFrame" src="https://docs.google.com/forms/d/e/1FAIpQLSfqfZUv6p0_k0IbAozo19lFsReABYgyhmAHUcJcsKK4havbfw/viewform?usp=header"></iframe>

  <div id="warningModal" class="modal">
    <p>⚠️ Jangan berpindah aplikasi atau tab selama ujian!<br>
    Percobaan: <span id="attempts"></span> dari 3</p>
  </div>

  <script>
    let warnings = localStorage.getItem("MATEMATIKA 10_warnings") || 0;
    warnings = parseInt(warnings);

    function showWarning() {
      warnings++;
      localStorage.setItem("MATEMATIKA 10_warnings", warnings);
      if (warnings >= 3) {
        window.location.href = "akses_ditutup.html";
      } else {
        document.getElementById("attempts").innerText = warnings;
        document.getElementById("warningModal").style.display = "block";
        setTimeout(()=>{
          document.getElementById("warningModal").style.display="none";
        }, 2000);
      }
    }

    document.addEventListener("visibilitychange", () => {
      if (document.hidden) showWarning();
    });

    window.addEventListener("blur", showWarning);
  </script>
</body>
</html>
